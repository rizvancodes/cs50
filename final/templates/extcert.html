{% extends "layout.html" %}

{% block title %}
    Extended Certificate
{% endblock %}

{% block main %}
    <h1 class="text-center text-muted">Select Course</h1>
    <select name="courses", class="form-control", id="all_courses">
        {% for course in all_courses %}
        <option value="{{ course }}">{{ course }}</option>
        {% endfor %}
    </select>
    <table>
        <thead>
            <tr>
                <th>Unit</th>
                <th>Grade</th>
            </tr>
        </thead>
        <tbody>
                <tr>
                    <td>
                        <select name="units", class="form-control", id="all_units">
                        {% for unit in all_units %}
                        <option value="{{ unit["id"] }}">{{ unit["id"] }}.{{ unit["name"] }}</option>
                        {% endfor %}
                        </select>
                    </td>
                    <td>
                        <select name="units", class="form-control", id="all_units">
                        <option value="D">Distinction</option>
                        <option value="M">Merit</option>
                        <option value="P">Pass</option>
                        </select>
                    </td>
                </tr>
        </tbody>
    </table>
    <div>
        <button type="button" id="process_input">Submit</button>
    </div>
    <script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {

        $('#all_courses').change(function(){

          $.getJSON('/_update_dropdown', {
            selected_class: $('#all_courses').val()

          }).success(function(data) {
                $('#all_units').html(data.html_string_selected);
           })
        });
        $('#process_input').bind('click', function() {

            $.getJSON('/_process_data', {
                selected_class: $('#all_courses').val(),
                selected_entry: $('#all_units').val(),


            }).success(function(data) {
                $('#processed_results').text(data.random_text);
            })
          return false;

        });
      });
    </script>
{% endblock %}